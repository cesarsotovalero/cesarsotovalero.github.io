<!doctype html><meta charset=utf-8><style>.links line{stroke-opacity:.5;stroke-width:3px}.nodes circle{stroke:#000;stroke-width:1.5px;fill:#fff}text{font-family:sans-serif;font-size:10px}button{padding:10px 20px}</style><svg height="2500" width="2500"/><script src=https://d3js.org/d3.v4.min.js></script>
<script>var svg=d3.select("svg").call(responsivefy),width=+svg.attr("width"),height=+svg.attr("height"),color=d3.scaleOrdinal(d3.schemeCategory10).domain(["foo","bar","2","1"]),simulation=d3.forceSimulation().force("link",d3.forceLink().id(function(a){return a.id})).force("charge",d3.forceManyBody()).force("center",d3.forceCenter(width/2,height/2));d3.json("data.json",function(c,b){var d,a,e,f;if(c)throw c;d=svg.append("g").attr("class","links").selectAll("line").data(b.links).enter().append("line").attr("group",function(a){return a.group}).style("stroke",function(a){return color(a.group)}).on("click",function(a){d3.selectAll("line:not([group='"+a.group+"'])").style("opacity",function(){return currentDisplay=d3.select(this).style("opacity"),currentDisplay=currentDisplay=="1"?"0":"1",currentDisplay}),d3.selectAll("circle:not([group='"+a.group+"'])").style("opacity",function(){return currentDisplay=d3.select(this).style("opacity"),currentDisplay=currentDisplay=="1"?"0.1":"1",currentDisplay}),d3.selectAll("text:not([group='"+a.group+"'])").style("opacity",function(){return currentDisplay=d3.select(this).style("opacity"),currentDisplay=currentDisplay=="1"?"0.1":"1",currentDisplay})}).on("mouseover",function(a){d3.select(this).style("cursor","crosshair")}).on("mouseout",function(a){d3.select(this).style("cursor","default")}).attr("stroke-width",function(a){return a.value}),a=svg.append("g").attr("class","nodes").selectAll("g").data(b.nodes).enter().append("g"),e=a.append("circle").attr("r",5).attr("fill",function(a){return color(a.group)}).call(d3.drag().on("start",dragstarted).on("drag",dragged).on("end",dragended)),f=a.append("text").text(function(a){return a.id}).attr('x',6).attr('y',3),a.append("title").text(function(a){return a.id}),simulation.nodes(b.nodes).on("tick",g),simulation.force("link").links(b.links);function g(){d.attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.target.y}),a.attr("transform",function(a){return"translate("+a.x+","+a.y+")"})}});function dragstarted(a){d3.event.active||simulation.alphaTarget(.3).restart(),a.fx=a.x,a.fy=a.y}function dragged(a){a.fx=d3.event.x,a.fy=d3.event.y}function dragended(a){d3.event.active||simulation.alphaTarget(0),a.fx=null,a.fy=null}function responsivefy(a){const b=d3.select(a.node().parentNode),c=parseInt(a.style('width'),10),d=parseInt(a.style('height'),10),f=c/d;a.attr('viewBox',`0 0 ${c} ${d}`).attr('preserveAspectRatio','xMinYMid').call(e),d3.select(window).on('resize.'+b.attr('id'),e);function e(){const c=parseInt(b.style('width'));a.attr('width',c),a.attr('height',Math.round(c/f))}}</script>